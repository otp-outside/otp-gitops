apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: clusters-sno-prod-project-edge
  annotations:
    argocd.argoproj.io/sync-wave: "350"
  labels:
    gitops.tier.layer: clusters
  finalizers:
    - resources-finalizer.argocd.argoproj.io
spec:
  syncPolicy:
    automated:
      prune: true
      selfHeal: true
  destination:
    namespace: openshift-gitops
    server: https://kubernetes.default.svc
  project: clusters
  source:
    path: clusters/deploy/external-secrets/sno/
    helm:
      values: |
        # Infrastructure Environment Name
        infraEnv:
          name: bens-infrastructure
          location: benswinney-house
          networkType: dhcp # Valid Values are dhcp or static
          labels: "cogs: visualinspection"
          ntpSources: 192.168.1.1

        # Cluster Details
        cluster:
          name: sno
          imageName: 4.10.32
          clusterNetwork: 10.128.0.0/14
          serviceNetwork: 172.30.0.0/16
          machineNetwork: 192.168.1.0/24

        # Hosts Details
        hosts:
          name: host0
          macAddress: 52:54:00:c6:fe:cc
          bmcAddress: redfish-virtualmedia+http://ai-edge.swinney.io:8000/redfish/v1/Systems/b6c92bbb-1e87-4972-b17a-12def3948890

        # Manage Cluster from Hub Cluster Repository
        managedCluster: 
          status: "disabled" # Valid values "enabled" or "disabled"
          managedRepo: https://github.com/one-touch-provisioning/otp-gitops.git # Repository that will be used to manage the Cluster resources
          environment:  # Typically this would be dev, test, cicd, prod
          projectName:  # This could be a project, line of business, anything that makes sense to you. This references the folder name
                        # within the "environment" folder

        # Add Cluster to Existing ClusterSet
        clusterSet:
          name: "multicloud-cluster-set"
          enabled: disable 

        # Cloud Provider Configuration
        provider:
          baseDomain: home.swinney.io  